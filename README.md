# PC点菜管理系统 - 使用说明

## 🚀 快速开始

### 1. 安装依赖（仅首次）
```bash
npm install
```

### 2. 启动开发服务器
```bash
npm run dev
```

### 3. 访问系统
打开浏览器访问：http://localhost:3000

---

## 📖 功能使用指南

### 一、首页
打开系统后，首页会显示：
- 📊 系统统计（菜品总数、分类数、今日订单数）
- 🛒 点菜管理入口
- ⚙️ 菜品管理入口
- ✨ 系统特色介绍

### 二、菜品管理（管理员功能）

#### 访问方式
首页点击"菜品管理" → `/admin/dishes`

#### 功能说明
1. **查看菜品**
   - 左侧显示分类列表（点击可筛选）
   - 右侧显示菜品列表（表格形式）
   - 顶部搜索框可快速查找菜品

2. **新增分类**
   - 点击右上角"新增分类"按钮
   - 填写分类名称和描述
   - 点击"创建"保存

3. **新增菜品**
   - 点击右上角"新增菜品"按钮
   - 填写菜品信息：
     * 菜品名称（必填）
     * 所属分类（必填）
     * 价格（必填）
     * 是否上架（默认上架）
   - 点击"创建"保存

4. **编辑菜品**
   - 在菜品列表中点击"编辑"按钮
   - 修改信息后点击"保存"

5. **删除菜品**
   - 在菜品列表中点击"删除"按钮
   - 确认后删除

6. **上下架管理**
   - 编辑菜品时可切换"上架"状态
   - 下架的菜品不会出现在点菜页面

### 三、点菜管理（核心功能）

#### 1. 创建订单
- 方式1: 首页点击"点菜管理" → 点击"创建新订单"
- 方式2: 订单列表页 `/orders` → 点击"创建新订单"

#### 2. 订单列表
访问 `/orders` 可以看到所有订单：
- 显示订单日期、状态、菜品数量、总价
- 可按日期筛选订单
- 点击"查看详情"进入点菜页面
- 可删除订单

#### 3. 点菜页面（重点）
访问 `/orders/{订单ID}` 进入点菜页面，界面分为三栏：

**左栏：菜单浏览**
- 顶部搜索框：输入菜品名称快速查找
- 分类标签：点击可筛选不同分类的菜品
- 菜品列表：显示所有菜品，点击"添加"即可加入订单

**中栏：已点菜品**
- 显示当前订单的所有菜品
- 按分类分组显示
- 每个菜品可以：
  * 点击 "+" 增加数量
  * 点击 "-" 减少数量
  * 点击"删除"移除该菜品
- 随机推荐的菜品会有 "🎲 随机" 标签

**右栏：订单统计**
- 菜品数量：订单中有多少道不同的菜
- 总份数：所有菜品的份数总和
- 分类统计：按分类显示小计
- 预估总价：订单的总金额（大字显示）
- 随机推荐菜品列表（如有）

#### 4. 随机推荐功能 🎲
- 点击顶部"🎲 随机推荐"按钮
- 系统会随机展示一道菜品
- 可以选择：
  * "添加到订单"：该菜品会被添加，并标记为随机推荐
  * "再换一个"：重新随机一道菜
  * "取消"：关闭推荐

#### 5. 复制历史菜单功能
- 点击顶部"复制历史菜单"按钮
- 弹出历史订单列表
- 点击任意订单，该订单的所有菜品会自动添加到当前订单
- 如果菜品已存在，会自动累加数量

#### 6. 完成订单
- 点菜完成后，点击顶部"完成订单"按钮
- 确认后，订单状态变为"已完成"
- 自动返回订单列表

### 四、协同点菜（多人使用）

**场景**：团队聚餐，多人共同点菜

**使用方法**：
1. 一个人创建订单，获取订单链接（如：`/orders/abc123`）
2. 将链接分享给其他人
3. 每个人打开链接后都可以：
   - 添加自己想吃的菜品
   - 查看别人点了什么
   - 看到实时的价格统计
4. 点完后点击"完成订单"

**自动刷新功能**：
- ✨ 点菜页面：每5秒自动刷新一次订单数据
- ✨ 订单列表：每10秒自动刷新一次列表
- 🔄 页面顶部会显示"自动刷新中"标识
- 💡 多人协同时，其他人的更新会在5秒内自动显示

---

## 🎯 使用技巧

### 技巧1：快速重复点餐
如果经常点同一批菜品：
1. 创建一个新订单
2. 点击"复制历史菜单"
3. 选择之前的订单
4. 一键复制所有菜品，根据需要微调

### 技巧2：选择困难症救星
不知道点什么？
1. 多次点击"随机推荐"
2. 看到喜欢的就添加
3. 快速组成一桌菜

### 技巧3：分类点菜
1. 先点一道主菜（如：精品特色）
2. 再点几道小炒（如：家常小炒）
3. 最后点一两道凉菜（如：辣口味菜）
4. 右侧会显示各分类的小计，方便控制预算

### 技巧4：价格控制
- 右侧实时显示总价
- 可以根据预算随时添加或删除菜品
- 按分类统计帮助合理分配

---

## 🔧 数据库管理命令

```bash
# 打开数据库可视化工具
npm run db:studio

# 重置数据库（删除所有数据并重新导入默认菜单）
npm run db:reset

# 手动导入默认菜单
npm run db:seed
```

---

## ⚠️ 常见问题

### Q1: 页面显示空白？
A: 确保开发服务器正在运行（`npm run dev`），访问 http://localhost:3000

### Q2: 看不到菜品？
A: 进入"菜品管理"检查菜品是否已上架

### Q3: 订单没有保存？
A: 当前使用SQLite数据库，数据存储在 `prisma/dev.db` 文件中，除非删除该文件，否则数据会一直保留

### Q4: 多人协同时看不到对方的更新？
A: 系统已支持自动刷新功能！点菜页面每5秒自动更新，无需手动刷新。如需立即看到更新，可以手动刷新页面（F5或Ctrl+R）

### Q5: 如何切换到生产环境的数据库？
A: 修改 `.env` 文件中的 `DATABASE_URL`，从 SQLite 切换到 PostgreSQL 或 MySQL

---

## 📞 技术支持

如有问题，请查看：
- 完整需求文档：`需求文档.md`
- 项目说明：`README_项目说明.md`
- Next.js 文档：https://nextjs.org/docs
- Prisma 文档：https://www.prisma.io/docs

---

**祝您使用愉快！🎉**

